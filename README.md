# Agentic AI Portfolio Manager

A modular, agent-based portfolio management system that leverages CrewAI to coordinate research, risk, and trading agents for automated investment analysis and decision-making.

---

## 🚀 Overview

**Agentic AI Portfolio Manager** automates the process of researching, analyzing, and making trading decisions for equity portfolios. The system uses multiple specialized AI agents—each with a distinct role—to collaboratively generate actionable insights and trading recommendations. All agent activities and system events are logged for transparency and future analysis.

---

## 🏗️ Architecture

- **Language:** Python 3.11
- **AI Framework:** [CrewAI](https://github.com/joaomdmoura/crewAI)
- **Data Access:** [yfinance](https://github.com/ranaroussi/yfinance), Serper API, web scraping tools
- **Logging:** Python logging module (file-based, logs stored in `/logs`)
- **Environment:** Conda (`environment.yml` provided)

### Directory Structure

```
.
├── agents/           # Agent definitions (research, risk, trader, refining)
├── crew/             # Crew assembly and parallel execution logic
├── logs/             # Log files for each agent and crew
├── results/          # Output files (JSON summaries, hypotheses, refinements)
├── tasks/            # Task definitions for each agent
├── tools/            # Utility tools (web search, scraping, price fetch)
├── utils/            # Utility functions (date, output formatting)
├── main.py           # Entry point for running the system
├── environment.yml   # Conda environment specification
├── .env              # API keys and environment variables
└── README.md         # Project documentation
```

---

## 🧠 Agents & Roles

| Agent Name                  | Role Description                                                                                   |
|-----------------------------|---------------------------------------------------------------------------------------------------|
| **Research Agents**         | Analyze macroeconomic, sector, and market data to generate actionable insights.                   |
| **Trader Agent**            | Makes trading hypotheses and portfolio strategies based on research output.                       |
| **Critic & Refiner Agents** | Critique and refine trade hypotheses for quality and robustness.                                  |
| **Risk Agent** (planned)    | Evaluate portfolio risk metrics (volatility, exposure, drawdown).                                 |

---

## ⚙️ Features

- **Automated Research:** Multiple research agents analyze macro trends, banking risk, capital flows, fiscal policy, growth, and inflation.
- **Parallel Execution:** Research and refinement tasks run concurrently for efficiency.
- **Live Data Integration:** Fetches current stock prices and market data using yfinance and web tools.
- **Structured Output:** Results are saved as structured JSON for downstream use.
- **Logging:** All agent actions and system events are logged to files in `/logs`.
- **Modular Design:** Easily extendable to add new agents, tasks, or tools.

---

## 🏁 Getting Started

### 1. Clone the Repository

```sh
git clone https://github.com/yourusername/agentic-portfolio.git
cd agentic-portfolio
```

### 2. Set Up the Environment

```sh
conda env create -f environment.yml
conda activate project-2
```

### 3. Configure API Keys

- Copy `.env.example` to `.env` and fill in your `OPENAI_API_KEY` and `SERPER_API_KEY`.

### 4. Run the System

```sh
python main.py
```

---

## 📝 Output Files

All output files are saved in the `results/` directory:

- **`research_summary.json`**: Structured summary of macro research from all research agents.
- **`trader_hypotheses.json`**:  
  - Contains a JSON object with a description and an `items` array of trade hypotheses generated by the trader agent.
  - Each item includes fields like `name`, `brief_description`, `detailed_description`, and `portfolio_instructions`.
- **`refined_hypotheses.json`**:  
  - Contains a list of refined trade hypotheses, sometimes as arrays or objects, as produced by the critic and refiner agents.
  - Each entry includes detailed trade thesis information and portfolio instructions.
- **`critic_feedback.json`**:  
  - Contains feedback from the critic agent for each hypothesis.

**Example structure for `trader_hypotheses.json`:**
```json
{
  "type": "array",
  "description": "A list of trade theses generated from macro research",
  "items": [
    {
      "name": "...",
      "brief_description": "...",
      "detailed_description": "...",
      "portfolio_instructions": {
        "asset_class": "...",
        "sample_instruments": ["...", "..."],
        "direction": "...",
        "sizing": "..."
      }
    }
    // more hypotheses...
  ]
}
```

**Example structure for `refined_hypotheses.json`:**
```json
[
  {
    "type": "array",
    "items": [
      {
        "name": "...",
        "brief_description": "...",
        "detailed_description": "...",
        "portfolio_instructions": {
          "asset_class": "...",
          "sample_instruments": ["...", "..."],
          "direction": "...",
          "sizing": "..."
        }
      }
      // more refined hypotheses...
    ]
  },
  [
    // alternative format: array of refined hypotheses
  ],
  {
    "raw": "..." // sometimes raw output or error messages
  }
]
```

---

## 🛠️ Extending the System

- **Add new agents:** Define in `agents/`
- **Add new tasks:** Define in `tasks/`
- **Add new tools:** Place in `tools/` and register with agents as needed

---

## 📚 References

- [CrewAI Documentation](https://docs.crewai.com/)
- [yfinance Documentation](https://github.com/ranaroussi/yfinance)
- [Serper API](https://serper.dev/)

---

## 📝 License

MIT License. See [LICENSE](LICENSE) for details.

---

## 👤 Author

Bryce Turner

---

## 💡 Future Work

- Implement Risk Agent for portfolio risk analysis
- Integrate Trader Agent with Interactive Brokers API for live/paper trading
- Add daily portfolio summary reports
- Upgrade logging to PostgreSQL for advanced analytics

---

*For questions or contributions, please open an issue or pull request!*